FROM node:18-alpine 

ARG test
ARG DATABASE_HOSTNAME_PROD
ARG DATABASE_NAME_PROD
ARG DATABASE_PASSWORD_PROD
ARG DATABASE_USERNAME_PROD
ARG PASSPORT_SECRET

ENV test=${test}
ENV DATABASE_HOSTNAME_PROD=${DATABASE_HOSTNAME_PROD}
ENV DATABASE_NAME_PROD=${DATABASE_NAME_PROD}
ENV DATABASE_PASSWORD_PROD=${DATABASE_PASSWORD_PROD}
ENV DATABASE_USERNAME_PROD=${DATABASE_USERNAME_PROD}
ENV PASSPORT_SECRET=${PASSPORT_SECRET}

WORKDIR /server
COPY package.json .
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "run", "dev"]